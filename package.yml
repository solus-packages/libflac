name       : libflac
version    : 1.3.2
release    : 9
source     :
    - https://downloads.xiph.org/releases/flac/flac-1.3.2.tar.xz : 91cfc3ed61dc40f47f050a109b08610667d73477af6ef36dcad31c31a4a8d53f
license    :
    - BSD-3-Clause
    - GFDL-1.1-or-later
    - GPL-2.0-or-later
    - LGPL-2.1-or-later
component  : multimedia.codecs
summary    : Encoder/decoder for the Free Lossless Audio Codec
description: |
    FLAC stands for Free Lossless Audio Codec, an audio format similar to MP3, but lossless, meaning that audio is compressed in FLAC without any loss in quality.
builddeps  :
    - pkgconfig32(ogg)
    - glibc-32bit-devel
    - nasm
emul32     : yes
setup      : |
    %apply_patches

    export CFLAGS="${CFLAGS/-g2/}"
    export CFLAGS="${CFLAGS/-flto/} -funroll-loops -O3 -falign-functions=32"
    %autogen --disable-static --disable-xmms-plugin
build      : |
    if [[ ! -z "${EMUL32BUILD}" ]]; then
        CC="gcc -m32" %make V=1
    else
        CC=gcc %make V=1
    fi
install    : |
    %make_install
